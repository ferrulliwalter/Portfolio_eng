<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Portfolio – Walter</title>
  <meta name="description" content="Portfolio – one-page showcase without a menu." />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#0b120e; --fg:#f4f8f5; --muted:#a8bfb1; --card:#122019; --accent:#2fb369;
      --radius:20px; --shadow:0 10px 30px rgba(0,0,0,.25);
    }
    *{box-sizing:border-box}
    html,body{margin:0; padding:0; background:var(--bg); color:var(--fg); font-family:'Open Sans', system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;}
    a{color:inherit}
    .wrap{max-width:1100px; margin:0 auto; padding:28px;}
    header{display:flex; align-items:center; justify-content:space-between; gap:16px; padding:32px 0;}
    .id{display:flex; gap:18px; align-items:center}
    .avatar{width:64px; height:64px; border-radius:50%; object-fit:cover; box-shadow:0 4px 16px rgba(0,0,0,.25);} 
    h1{font-size:32px; line-height:1.1; margin:0}
    .sub{color:var(--muted); margin-top:6px; font-size:15px}
    .cta{display:flex; gap:10px; flex-wrap:wrap; align-items:center;}
    .btn{appearance:none; border:none; padding:12px 16px; border-radius:12px; background:var(--accent); color:white; cursor:pointer; box-shadow:var(--shadow); font-family:'Open Sans', system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; font-weight:400; font-size:15px;}
    .btn.ghost{background:transparent; border:1px solid #2a2f39; color:var(--fg);}

    .hero{background:linear-gradient(135deg, rgba(47,179,105,.15), transparent 60%); padding:26px; border-radius:var(--radius); box-shadow:var(--shadow)}

    .controls{display:flex; gap:12px; align-items:center; justify-content:flex-end; margin:18px 0}
    .toggle{background:#1a1f27; padding:6px; border-radius:99px; display:flex; gap:6px}
    .toggle button{padding:8px 12px; border-radius:99px; border:none; background:transparent; color:var(--muted); cursor:pointer}
    .toggle button.active{background:var(--accent); color:white}

    /* Mosaic grid */
    .grid{display:grid; grid-template-columns:repeat(3,1fr); gap:16px}
    @media (max-width:900px){.grid{grid-template-columns:repeat(2,1fr)}}
    @media (max-width:560px){.grid{grid-template-columns:1fr}}
    .card{background:var(--card); border-radius:16px; overflow:hidden; box-shadow:var(--shadow); display:flex; flex-direction:column}
    .card img{width:100%; aspect-ratio:16/10; object-fit:cover}
    .card .body{padding:14px}
    .card h3{margin:0 0 6px; font-size:18px}
    .meta{display:flex; gap:8px; flex-wrap:wrap; margin-top:8px}
    .tag{font-size:12px; color:#d2d7e0; background:#242a34; padding:6px 8px; border-radius:999px}

    /* Slide viewer */
    .slides{display:none; position:relative; background:var(--card); border-radius:16px; overflow:hidden; box-shadow:var(--shadow)}
    .slides.active{display:block}
    .slide-img{width:100%; height:380px; object-fit:cover; display:block}
    .slide-info{display:flex; justify-content:space-between; align-items:center; padding:12px 14px}
    .nav{position:absolute; top:50%; transform:translateY(-50%); width:100%; display:flex; justify-content:space-between; padding:0 8px}
    .nav button{border:none; width:44px; height:44px; border-radius:50%; background:rgba(0,0,0,.35); color:#fff; font-size:18px; cursor:pointer}

    .flag{display:inline-grid; place-items:center; width:36px; height:36px; border-radius:50%; text-decoration:none; box-shadow:var(--shadow); background:transparent; padding:0;}
    .flag svg{width:36px; height:36px; display:block; border-radius:50%; overflow:hidden;}
    .flag:hover{transform:translateY(-1px)}

    footer{color:var(--muted); text-align:center; padding:36px 0}
    .links{display:flex; gap:12px; justify-content:center; flex-wrap:wrap}

  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="id">
        <img class="avatar" src="image_1.jpg" alt="Walter's photo" />
        <div>
          <h1>Walter – Portfolio</h1>
          <div class="sub">A selection of my work</div>
        </div>
      </div>
      <div class="cta">
        <a class="btn ghost" href="./CV_WalterFerrulli.pdf" target="_blank" rel="noopener">Download CV</a>
        <button class="btn" id="contactBtn" aria-haspopup="dialog">Contact</button>
        <!-- GB flag (current site) -->
        <a class="flag" href="https://ferrulliwalter.github.io/Portfolio_eng/" target="_blank" rel="noopener" aria-label="English">
          <svg viewBox="0 0 36 36" xmlns="http://www.w3.org/2000/svg" role="img" aria-hidden="true">
            <defs><clipPath id="c"><circle cx="18" cy="18" r="18"/></clipPath></defs>
            <g clip-path="url(#c)">
              <rect width="36" height="36" fill="#012169"/>
              <g stroke="#FFF" stroke-width="8" stroke-linecap="square">
                <path d="M0 0 L36 36"/><path d="M36 0 L0 36"/>
              </g>
              <g stroke="#C8102E" stroke-width="4" stroke-linecap="square">
                <path d="M0 0 L36 36"/><path d="M36 0 L0 36"/>
              </g>
              <rect x="0" y="14" width="36" height="8" fill="#FFF"/><rect x="14" y="0" width="8" height="36" fill="#FFF"/>
              <rect x="0" y="16" width="36" height="4" fill="#C8102E"/><rect x="16" y="0" width="4" height="36" fill="#C8102E"/>
            </g>
          </svg>
        </a>
        <!-- IT flag -->
        <a class="flag" href="https://ferrulliwalter.github.io/Portfolio_ita/" target="_blank" rel="noopener" aria-label="Italiano">
          <svg viewBox="0 0 36 36" xmlns="http://www.w3.org/2000/svg" role="img" aria-hidden="true">
            <defs><clipPath id="r"><circle cx="18" cy="18" r="18"/></clipPath></defs>
            <g clip-path="url(#r)">
              <rect width="36" height="36" fill="#fff"/>
              <rect width="12" height="36" x="0" fill="#009246"/>
              <rect width="12" height="36" x="24" fill="#CE2B37"/>
            </g>
          </svg>
        </a>
      </div>
    </header>

    <section class="hero" aria-label="Projects">
      <div class="controls">
        <div class="toggle" role="tablist" aria-label="Gallery view">
          <button id="mosaicBtn" role="tab" aria-selected="true" class="active">Grid</button>
          <button id="slideBtn" role="tab" aria-selected="false">Slideshow</button>
        </div>
      </div>

      <!-- GRID -->
      <div id="mosaic" class="grid" aria-live="polite"></div>

      <!-- SLIDESHOW -->
      <div id="slides" class="slides" aria-live="polite" aria-label="Projects slideshow">
        <img id="slideImage" class="slide-img" alt="Project preview" src="" />
        <div class="nav" aria-hidden="false">
          <button id="prev" aria-label="Previous project">◀</button>
          <button id="next" aria-label="Next project">▶</button>
        </div>
        <div class="slide-info">
          <div>
            <strong id="slideTitle">Title</strong>
            <div id="slideDesc" style="color:var(--muted); font-size:14px"></div>
          </div>
        </div>
      </div>
    </section>

    <footer>
      <div>© <span id="year"></span> Walter. All rights reserved.</div>
      <div class="links" aria-label="Social links">
        <a href="mailto:ferrulli.walter@gmail.com">ferrulli.walter@gmail.com</a>
        <span>·</span>
        <a href="https://www.linkedin.com/in/walter-ferrulli/" target="_blank" rel="noopener">LinkedIn</a>
      </div>
    </footer>
  </div>

  <script>
    // ======= PROJECTS DATA (EN) =======
    const projects = [
      {
        title: "Customer Data Platform – German Fragrance Manufacturer",
        desc: "End-to-end CDP implementation integrating B2B/B2C online & offline sources. Built a cross-brand/country data hub and proprietary BI.",
        full: "Led the end-to-end setup and implementation of a comprehensive Customer Data Platform for a leading German fragrance manufacturer. The project integrated diverse data sources—including B2B and B2C sales (online/offline) and digital behavior analytics—into a centralized cross-brand and cross-country data hub, along with a proprietary business intelligence layer. Enabled high-impact use cases like Marketing Mix Modeling, abandoned cart orchestration, and Next Best Action algorithms, improving decision-making, marketing efficiency, and customer engagement across channels.",
        image: "image_2.png",
        link: "#",
        tags: ["CDP", "Data Hub", "BI", "MMM/NBA", "Customer Analytics"],
        keywords: ["Customer Data Platform","CDP","Business Intelligence","Next Best Action","Marketing Mix Modeling","data hub","engagement","cross-country"]
      },
      {
        title: "Geointelligence – Global Automotive Brand",
        desc: "GeoIntelligence suite for multi-brand/country network governance: coverage analysis, performance benchmarks, greenfield and scenario sims.",
        full: "Designed and implemented an advanced Geointelligence solution to optimize network governance for a global, multi-brand automotive company. Integrated a market-leading geo suite to enable strategic network analysis, performance benchmarking, and location intelligence. Brought in real-time KPIs, competitor views, and greenfield/scenario simulations. A robust data strategy ensured consistent ingestion, processing, and visualization across regions, combining internal and 3P data. Result: faster, better decisions on footprint, coverage gaps, and investment priorities.",
        image: "image_3.png",
        link: "#",
        tags: ["GeoIntelligence", "Network Planning", "KPIs", "Location Intelligence"],
        keywords: ["GeoIntelligence","Location Intelligence","KPI","greenfield","scenario","governance","benchmark"]
      },
      {
        title: "E-commerce Full Potential – Global Eyewear Leader",
        desc: "Shopify program management: SEO, tech integrations, Shopify Payments, regional expansion, marketing automations.",
        full: "Led a two-year e-commerce enhancement program for a global eyewear leader: daily operations management, SEO improvements, and key technical integrations on Shopify. Highlights include Shopify Payments rollout, support for regional expansion, and optimization of marketing automation. The initiative streamlined operations, boosted organic visibility, and improved revenue KPIs versus targets.",
        image: "https://images.unsplash.com/photo-1512295767273-ac109ac3acfa?q=80&w=1600&auto=format&fit=crop",
        link: "#",
        tags: ["E-commerce", "Shopify", "SEO", "Marketing Automation"],
        keywords: ["Shopify","SEO","Marketing Automation","Payments","expansions","e-commerce"]
      },
      {
        title: "CRM & Loyalty – Global Fashion & Retail Brand",
        desc: "Loyalty program definition (naming, tiers, mechanics) and business case. Real-time POS integration, analytics, journey automation.",
        full: "Designed and implemented a full CRM & Loyalty program for a global fashion brand: from concept (naming, tiers, points/rewards mechanics) and business case to ensure ROI, to execution with real-time logic connecting the loyalty engine to in-store POS systems. Delivered advanced analytics, marketing automation workflows, and optimized journeys—shifting from transactional to relational, increasing loyalty and business impact.",
        image: "https://images.unsplash.com/photo-1512436991641-6745cdb1723f?q=80&w=1600&auto=format&fit=crop",
        link: "#",
        tags: ["CRM", "Loyalty", "Customer Journeys", "Real-time POS"],
        keywords: ["CRM","Loyalty","Real-time","POS","journey","analytics","automation"]
      },
      {
        title: "Influencer Marketing Ecosystem – Coffee Machines",
        desc: "Centralized influencer ecosystem integrated with CRM/MA/e-commerce, HQ-local governance, scalable processes, budget/roll-out framework.",
        full: "Designed and implemented a comprehensive Influencer Marketing Ecosystem for a leading coffee machine producer, integrating a centralized platform with CRM, marketing automation, and e-commerce systems. Defined governance to ensure global cohesion and local adaptability; developed scalable processes and advanced tools; created a budget framework and roll-out plan for cost-effective execution. Result: stronger awareness, conversion, and loyalty.",
        image: "https://images.unsplash.com/photo-1498804103079-a6351b050096?q=80&w=1600&auto=format&fit=crop",
        link: "#",
        tags: ["Influencer", "Governance", "Automation", "E-commerce"],
        keywords: ["Influencer","governance","automation","e-commerce","roll-out","budget"]
      }
    ];

    // ======= RENDER GRID =======
    const grid = document.getElementById('mosaic');
    function renderGrid(){
      grid.innerHTML = '';
      projects.forEach((p, i)=>{
        const card = document.createElement('article');
        card.className = 'card';
        card.id = `p-${i}`;
        card.innerHTML = `
          <img src="${p.image}" alt="${p.title}" data-idx="${i}" style="pointer-events:none; cursor:default;" />
          <div class="body">
            <h3>${p.title}</h3>
            <div style="color:var(--muted); font-size:14px">${p.desc}</div>
            <div class="meta">${p.tags.map(t=>`<span class="tag">${t}</span>`).join('')}</div>
            <div style="margin-top:12px; display:flex; gap:8px; flex-wrap:wrap">
              <a class="btn ghost" href="#slides" data-show-slide="${i}">Details</a>
            </div>
          </div>`;
        grid.appendChild(card);
      });
    }

    // Grid -> Slideshow navigation (Details button only)
    grid.addEventListener('click', (e)=>{
      const showBtn = e.target.closest('[data-show-slide]');
      if(showBtn){
        const i = parseInt(showBtn.getAttribute('data-show-slide'),10);
        if(!Number.isNaN(i)){
          idx = i;
          setView('slides');
          renderSlide();
          document.getElementById('slides').scrollIntoView({behavior:'smooth', block:'start'});
        }
      }
    });

    // ======= SLIDESHOW =======
    const slidesEl = document.getElementById('slides');
    const slideImage = document.getElementById('slideImage');
    const slideTitle = document.getElementById('slideTitle');
    const slideDesc = document.getElementById('slideDesc');
    let idx = 0;

    function escapeReg(s){ return s.replace(/[.*+?^${}()|[\]\\]/g, '\\$&'); }
    function highlight(text, words){
      // substring highlight (no word boundaries), case-insensitive
      if(!words || !words.length) return text;
      let out = text;
      const used = new Set();
      words.forEach(w=>{
        if(!w) return;
        const key = String(w).toLowerCase();
        if(used.has(key)) return; used.add(key);
        const re = new RegExp(`(${escapeReg(String(w))})`, 'gi');
        out = out.replace(re, '<strong>$1</strong>');
      });
      return out;
    }

    function renderSlide(){
      const p = projects[idx];
      slideImage.src = p.image; 
      slideImage.alt = p.title;
      slideTitle.textContent = p.title;
      slideDesc.innerHTML = highlight(p.full, p.keywords || p.tags);
    }

    document.getElementById('prev').onclick = ()=>{ idx = (idx - 1 + projects.length) % projects.length; renderSlide(); };
    document.getElementById('next').onclick = ()=>{ idx = (idx + 1) % projects.length; renderSlide(); };

    // ======= TOGGLE VIEWS =======
    const mosaicBtn = document.getElementById('mosaicBtn');
    const slideBtn = document.getElementById('slideBtn');
    const mosaic = document.getElementById('mosaic');
    function setView(view){
      const isMosaic = view === 'mosaic';
      mosaic.style.display = isMosaic ? 'grid' : 'none';
      slidesEl.classList.toggle('active', !isMosaic);
      mosaicBtn.classList.toggle('active', isMosaic);
      mosaicBtn.setAttribute('aria-selected', isMosaic);
      slideBtn.classList.toggle('active', !isMosaic);
      slideBtn.setAttribute('aria-selected', !isMosaic);
      if(!isMosaic){ renderSlide(); }
    }
    mosaicBtn.onclick = ()=> setView('mosaic');
    slideBtn.onclick = ()=> setView('slides');

    // ======= CONTACT =======
    const contactBtn = document.getElementById('contactBtn');
    contactBtn.addEventListener('click', ()=>{
      alert('Contact\n\nEmail: ferrulli.walter@gmail.com\nLinkedIn: https://www.linkedin.com/in/walter-ferrulli/');
    });

    // ======= INIT =======
    document.getElementById('year').textContent = new Date().getFullYear();
    renderGrid();
    // initialize slideshow content to avoid placeholder
    renderSlide();
    setView('mosaic');

    // ======= SELF-TESTS =======
    (function selfTest(){
      try{
        console.assert(typeof renderGrid === 'function', 'renderGrid should exist');
        console.assert(document.querySelectorAll('.card').length === projects.length, 'Grid must render one card per project');
        // Required tags
        console.assert(projects[0].tags.includes('Customer Analytics'), 'Project 0 must include Customer Analytics');
        console.assert(projects[1].tags.includes('Location Intelligence'), 'Project 1 must include Location Intelligence');
        // Avatar
        const av = document.querySelector('img.avatar');
        console.assert(av && av.getAttribute('src') === 'image_1.jpg', 'Avatar should be image_1.jpg');
        // Title not placeholder
        setView('slides');
        console.assert(document.getElementById('slideTitle').textContent === projects[idx].title, 'Slideshow should show correct title');
        // Details click opens correct slide 0
        const firstBtn = document.querySelector('[data-show-slide="0"]');
        if(firstBtn){
          firstBtn.click();
          console.assert(document.getElementById('slideTitle').textContent === projects[0].title, 'Details(0) opens slideshow on project 0');
        }
        // Highlight tests
        idx = 0; renderSlide();
        console.assert(document.getElementById('slideDesc').innerHTML.includes('<strong>Customer Data Platform</strong>'), 'Highlight should bold "Customer Data Platform"');
        const sample = 'This is a Platform test.';
        const h = highlight(sample, ['form']);
        console.assert(h.includes('<strong>form</strong>'), 'Highlight should also bold substrings ("form" in "Platform")');
        // Mosaic images non-clickable
        const firstImg = document.querySelector('.card img');
        console.assert(firstImg && getComputedStyle(firstImg).pointerEvents === 'none', 'Mosaic images must be non-clickable');
        setView('mosaic');
      }catch(err){
        console.error('Self-test failed:', err);
      }
    })();
  </script>
</body>
</html>
